<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>PFTC Teaching Material - 2&nbsp; The trait wheel</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./6_pftc_data.html" rel="next">
<link href="./1_courses.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link rel="stylesheet" href="css/style-chapters.css">
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./5_trait_collection.html">Trait data collection</a></li><li class="breadcrumb-item"><a href="./5_trait_collection.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The trait wheel</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">PFTC Teaching Material</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/Plant-Functional-Trait-Course/PFTC_teaching_material/" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
<li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=%7Curl%7C">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=%7Curl%7C">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
      </ul>
</div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">PFTC courses</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1_courses.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">PFTC Course information</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Trait data collection</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./5_trait_collection.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The trait wheel</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">PFTC data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./6_pftc_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Working with PFTC data</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Data science</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./7_biostats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Introduction to R, RStudio and GitHub</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./8_reproducible.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Reproducible workflows</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./9_data_curation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Data curation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10_community.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Plant community composition data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12_traits.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Plant functional trait data</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#collecting-leaves-in-the-field" id="toc-collecting-leaves-in-the-field" class="nav-link active" data-scroll-target="#collecting-leaves-in-the-field"><span class="header-section-number">2.1</span> Collecting leaves in the field</a></li>
  <li><a href="#preparing-leaves-for-measuring-traits-in-lab" id="toc-preparing-leaves-for-measuring-traits-in-lab" class="nav-link" data-scroll-target="#preparing-leaves-for-measuring-traits-in-lab"><span class="header-section-number">2.2</span> Preparing leaves for measuring traits in lab</a></li>
  <li><a href="#wet-mass" id="toc-wet-mass" class="nav-link" data-scroll-target="#wet-mass"><span class="header-section-number">2.3</span> Wet mass</a></li>
  <li><a href="#measure-leaf-area-using-a-scanner" id="toc-measure-leaf-area-using-a-scanner" class="nav-link" data-scroll-target="#measure-leaf-area-using-a-scanner"><span class="header-section-number">2.4</span> Measure leaf area using a scanner</a></li>
  <li><a href="#leaf-thickness" id="toc-leaf-thickness" class="nav-link" data-scroll-target="#leaf-thickness"><span class="header-section-number">2.5</span> Leaf thickness</a></li>
  <li><a href="#data-entry" id="toc-data-entry" class="nav-link" data-scroll-target="#data-entry"><span class="header-section-number">2.6</span> Data entry</a></li>
  <li><a href="#dry-mass" id="toc-dry-mass" class="nav-link" data-scroll-target="#dry-mass"><span class="header-section-number">2.7</span> Dry mass</a></li>
  <li><a href="#data-checking" id="toc-data-checking" class="nav-link" data-scroll-target="#data-checking"><span class="header-section-number">2.8</span> Data checking</a></li>
  <li><a href="#data-documentation" id="toc-data-documentation" class="nav-link" data-scroll-target="#data-documentation"><span class="header-section-number">2.9</span> Data documentation</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">2.10</span> References</a></li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/Plant-Functional-Trait-Course/PFTC_teaching_material/blob/main/5_trait_collection.qmd" class="toc-action">View source</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">
<span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The trait wheel</span>
</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><p>This protocol shows how to collect, measure, check and document leaf functional traits for vascular plants using the trait wheel<sup>TW</sup> (<a href="#fig-trait-wheel">Figure&nbsp;<span>2.1</span></a>). The protocol is based on the trait handbook from Perez-Harguindeguy et al. <span class="citation" data-cites="Perez-Harguindeguy2013-nv">(<a href="#ref-Perez-Harguindeguy2013-nv" role="doc-biblioref">2013</a>)</span>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-trait-wheel" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/trait_wheel/TraitWheel_small.png" class="img-fluid figure-img" alt="Conceptual figure showing the different steps from collecting, processing and curating data in the trait wheel." width="1946"></p>
<figcaption class="figure-caption">Figure&nbsp;2.1: The different steps from collecting, processing and curating data in the trait wheel.</figcaption></figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="images/trait_wheel/Collect.png" class="img-fluid" style="width:10.0%"></p>
</div>
</div>
<section id="collecting-leaves-in-the-field" class="level2" data-number="2.1"><h2 data-number="2.1" class="anchored" data-anchor-id="collecting-leaves-in-the-field">
<span class="header-section-number">2.1</span> Collecting leaves in the field</h2>
<p>Be careful at all time when working in the experiment and avoid stepping on the experimental plots. Make yourself familiar with the experimental design (check the site maps), and how plot, blocks and sites are marked.</p>
<p>To collect plants, go to your plot and use a sitting mat to sit next to the plot. Collect the leaves and minimize disturbing the surroundings as much as possible.</p>
<p>We will collect traits in three different locations/experiments:</p>
<ul>
<li>At 5-6 sites along an elevational gradient (2000 - 3000 m a.s.l.)</li>
<li>RangeX project: two sites with ambient and warming using OTCs, with native and novel competitors</li>
</ul>
<p>The specific sampling and number of species will vary between the different projects.</p>
<p><strong>Trait sampling protocol</strong></p>
<p>The leaves should be collected from each 1 x 1 m plot or close to it.</p>
<p>We aim to collect leaves from the species that make up 80% of the cover in each plot. For each plot we will generate a species list.</p>
<p>Below is an example code to generate such a species list:</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">threshold</span> <span class="op">&lt;-</span>  <span class="fl">80</span></span>
<span></span>
<span><span class="va">cover</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">turfID</span>, <span class="va">species</span>, <span class="va">cover</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">turfID</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">turfID</span>, <span class="op">-</span><span class="va">cover</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>cumsum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="va">cover</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">cumsum</span> <span class="op">&lt;=</span> <span class="va">threshold</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For each plot and species find 3 individuals that are spread across the plot to avoid sampling clones. Choose reproductively mature adults with fully expanded leaves (i.e.&nbsp;not seedlings) and healthy-looking leaves (i.e.&nbsp;not grazed, no signs of pathogen or herbivore attack, no discoloration).</p>
<p>Measure the height of each individual plant and note down the height on the zip-loc bag (see below).</p>
<p>Collect 1 leaf from the individual, making sure to include the petiole (<a href="#fig-leaf-anatomy">Figure&nbsp;<span>2.2 (a)</span></a>). If you are uncertain whether something is a leaf vs.&nbsp;leaflet (<a href="#fig-leaflets">Figure&nbsp;<span>2.2 (b)</span></a>), ask your group leader.</p>
<p>If you cannot find 3 individuals of each species, that is ok. After a reasonable search, move on to the next species or plot.</p>
<div id="fig-grasslands" class="quarto-layout-panel">
<figure class="figure"><div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-leaf-anatomy" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/trait_wheel/leaf_anatomy_1.png" class="img-fluid figure-img" data-ref-parent="fig-grasslands"></p>
<figcaption class="figure-caption">(a) Leaf atanomy of a single leaf</figcaption></figure>
</div>
</div>
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-leaflets" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/trait_wheel/leaf_anatomy_2.png" class="img-fluid figure-img" data-ref-parent="fig-grasslands"></p>
<figcaption class="figure-caption">(b) A leaf with leaflets</figcaption></figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;2.2: Leaf atanomy</figcaption><p></p>
</figure>
</div>
<p><strong>Measuring vegetative height of individual plants in the field</strong></p>
<p>Measure the vegetative height of the individual plant in the field (<a href="#fig-height">Figure&nbsp;<span>2.3</span></a>). Vegetative height is the shortest distance between the main photosynthetic tissue on the plant and the ground, excluding any reproductive structure (e.g.&nbsp;buds, flowers or fruits). Leave the plant in it’s natural form and do not stretch the plant if it bends.</p>
<p>Different plants will require different measures of height. <a href="#fig-height">Figure&nbsp;<span>2.3</span></a> shows a couple of typical examples. For cushion plants (A), stick a the ruler into the cusion all the way to the ground. For forbs and graminoids (B, D, E) measure the main stem leaves, and do not stretch the leaves (D, F, G ).</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-height" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/trait_wheel/height.png" class="img-fluid figure-img" alt="Different plant types and how to measure height." width="1000"></p>
<figcaption class="figure-caption">Figure&nbsp;2.3: Different plant types and how to measure height.</figcaption></figure>
</div>
</div>
</div>
<p>Record this measurement using legibly numbers (<a href="#fig-numbers">Figure&nbsp;<span>2.4</span></a>) on the zip-loc bag (<a href="#fig-zip-loc">Figure&nbsp;<span>2.5</span></a>). Place the leaf/leaves for each individual in a bag with wet paper towels for transfer to lab.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-numbers" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/trait_wheel/numbers.png" class="img-fluid figure-img" alt="Illustrations for the one and only approved way to write numbers!" width="582"></p>
<figcaption class="figure-caption">Figure&nbsp;2.4: The one and only approved way to write numbers!</figcaption></figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="fig-zip-loc" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/trait_wheel/ziploc_label.png" class="img-fluid figure-img" alt="Sticker for Zip-loc bag" width="288"></p>
<figcaption class="figure-caption">Figure&nbsp;2.5: Sticker for Zip-loc bag</figcaption></figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="images/trait_wheel/Process.png" class="img-fluid" style="width:20.0%"></p>
</div>
</div>
</section><section id="preparing-leaves-for-measuring-traits-in-lab" class="level2" data-number="2.2"><h2 data-number="2.2" class="anchored" data-anchor-id="preparing-leaves-for-measuring-traits-in-lab">
<span class="header-section-number">2.2</span> Preparing leaves for measuring traits in lab</h2>
<p>Select one leaf per individual. For analysing chemical traits such as percent P, C, N and isotopes, a certain amount of dry biomass is needed. Make sure that we are collecting 0.03 g (30 mg) dried leaf material. Otherwise select several leaves until there is enough dry weight. This is called a bulk sample and should be indicated on the envelope (e.g.&nbsp;count the nr of leaves).</p>
<p>When collecting the leaf, include petiole and rachis (<a href="#fig-leaflets">Figure&nbsp;<span>2.2 (b)</span></a>). Pat the leaf dry with a tissue if there is visible water on the surface. Add a sticker to enter the information and a barcode sticker to the envelope (<a href="#fig-label">Figure&nbsp;<span>2.6</span></a> and <a href="#fig-barcode">Figure&nbsp;<span>2.6 (a)</span></a>). Attach the sticker with a stapler.</p>
<div id="fig-label" class="quarto-layout-panel">
<figure class="figure"><div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/trait_wheel/envelope_label.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Label with information</figcaption></figure>
</div>
</div>
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-barcode" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/trait_wheel/barcode.gif" class="img-fluid figure-img" data-ref-parent="fig-label"></p>
<figcaption class="figure-caption">(a) Barcode with unique leaf ID</figcaption></figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;2.6: Sticker and barcode example.</figcaption><p></p>
</figure>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
How IDs and barcodes are generated
</div>
</div>
<div class="callout-body-container callout-body">
<p>For more information on how the unique leaf IDs and barcode stickers are generated, see the readme file in this <a href="https://github.com/Plant-Functional-Trait-Course/PFTCFunctions">GitHub repo</a>.</p>
</div>
</div>
<p>Fill in all information between ‘collection day’ and ‘Bulk nr/length’. Carefully, check <a href="#tbl-info">Table&nbsp;<span>2.1</span></a> for the different options for the information on the label.</p>
<p>Place the leaf inside the envelope and put the envelope in a box for the next step. Make sure the envelopes are kept wet at all times.</p>
<div id="tbl-info" class="anchored">
<table class="table">
<caption>Table&nbsp;2.1: Information to write on the envelope.</caption>
<colgroup>
<col style="width: 23%">
<col style="width: 52%">
<col style="width: 23%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: left;">What to fill in</th>
<th style="text-align: left;"></th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Gradient</td>
<td style="text-align: left;">RangeX</td>
</tr>
<tr class="even">
<td style="text-align: left;">Date</td>
<td style="text-align: left;">add day, e.g.&nbsp;6</td>
<td style="text-align: left;">add day, e.g.&nbsp;6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">siteID</td>
<td style="text-align: left;">Number 1-5</td>
<td style="text-align: left;">LS / HS (circle)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Elevation</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">-</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Aspect</td>
<td style="text-align: left;">East / West (circle)</td>
<td style="text-align: left;">-</td>
</tr>
<tr class="even">
<td style="text-align: left;">Vegetation</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">focal / native (circle)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Treat_1</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">ambient / warm (circle)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Treat_2</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">vegetation / bare</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Species (genus and species)</td>
<td style="text-align: left;">Bistorta vivipara</td>
<td style="text-align: left;">Bistorta vivipara</td>
</tr>
<tr class="even">
<td style="text-align: left;">Project</td>
<td style="text-align: left;">T = trait, S = spectroscophy, R = roots, P = photosynthesis</td>
<td style="text-align: left;">T = Trait</td>
</tr>
<tr class="odd">
<td style="text-align: left;">BlockID</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Number 1-10</td>
</tr>
<tr class="even">
<td style="text-align: left;">PlotID</td>
<td style="text-align: left;">Number 1-5</td>
<td style="text-align: left;">Number 1-6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PlantID</td>
<td style="text-align: left;">Number 1-3</td>
<td style="text-align: left;">-</td>
</tr>
<tr class="even">
<td style="text-align: left;">PositionID</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Number 1-12</td>
</tr>
<tr class="odd">
<td style="text-align: left;">LeafID</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr class="even">
<td style="text-align: left;">Height cm</td>
<td style="text-align: left;">Number</td>
<td style="text-align: left;">Number</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bulk nr</td>
<td style="text-align: left;">Number if multiple leaves were samples</td>
<td style="text-align: left;">Number if multiple leaves were samples</td>
</tr>
</tbody>
</table>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="images/trait_wheel/Wet.png" class="img-fluid" style="width:15.0%"></p>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning for special cases.
</div>
</div>
<div class="callout-body-container callout-body">
<p>Carefully check the rules for how to measure special plant species plants.</p>
<ul>
<li>
<em>xx sp</em> have tightly rolled leaves and they should not be unfolded for the scanning.</li>
<li>
<em>xx sp</em> have tiny leaves. Choose a 10 cm piece of stem and scrape of all the leaves from this part for scanning. Make sure the leaves do not overlap</li>
</ul>
</div>
</div>
</section><section id="wet-mass" class="level2" data-number="2.3"><h2 data-number="2.3" class="anchored" data-anchor-id="wet-mass">
<span class="header-section-number">2.3</span> Wet mass</h2>
<p>Make sure the envelopes are still kept wet. Weigh each leaf and write the weight on the envelope, including all digits.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="images/trait_wheel/Scan.png" class="img-fluid" style="width:15.0%"></p>
</div>
</div>
</section><section id="measure-leaf-area-using-a-scanner" class="level2" data-number="2.4"><h2 data-number="2.4" class="anchored" data-anchor-id="measure-leaf-area-using-a-scanner">
<span class="header-section-number">2.4</span> Measure leaf area using a scanner</h2>
<p>For scanning the leaves we are using a Rasperry Pi setup. The Pis control the scanners, ensuring consistency, and validate file names.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Raspberry Pi setup
</div>
</div>
<div class="callout-body-container callout-body">
<p>For more information on the Raspberry Pi setup, see the readme file in this <a href="https://github.com/Plant-Functional-Trait-Course/pi_setup">GitHub repo</a>.</p>
</div>
</div>
<p><em>Start setup</em></p>
<p>Connect your Laptop to the Raspberry PI. Connect the PI with an ethernet cable to your laptop. Connect the scanner to the PI. Connect the barcode scanner to the PI. Connect the power cable to the PI.</p>
<p>Wait for one minute.</p>
<p>Open VNC Viewer and type in the IP address corresponding to your PI (<a href="#tbl-pi-ip">Table&nbsp;<span>2.2</span></a>).</p>
<div id="tbl-pi-ip" class="anchored">
<table class="table">
<caption>Table&nbsp;2.2: IP addresses of the PIs.</caption>
<thead><tr class="header">
<th style="text-align: left;">PI</th>
<th style="text-align: left;">IP address</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">obi wan</td>
<td style="text-align: left;">169.254.109.180</td>
</tr>
<tr class="even">
<td style="text-align: left;">yoda</td>
<td style="text-align: left;">169.254.160.193</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bb-8</td>
<td style="text-align: left;">169.254.54.188</td>
</tr>
<tr class="even">
<td style="text-align: left;">c-3po</td>
<td style="text-align: left;">169.254.247.22</td>
</tr>
<tr class="odd">
<td style="text-align: left;">darth vader</td>
<td style="text-align: left;">169.254.178.187</td>
</tr>
<tr class="even">
<td style="text-align: left;">r2-d2</td>
<td style="text-align: left;">169.254.231.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">deathstar</td>
<td style="text-align: left;">169.254.152.80</td>
</tr>
<tr class="even">
<td style="text-align: left;">mr. spock</td>
<td style="text-align: left;">169.254.204.207</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Grogu</td>
<td style="text-align: left;">169.254.169.194</td>
</tr>
<tr class="even">
<td style="text-align: left;">Princess Leia</td>
<td style="text-align: left;">169.254.128.185</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Rey</td>
<td style="text-align: left;">169.254.217.147</td>
</tr>
<tr class="even">
<td style="text-align: left;">Kylo Ren</td>
<td style="text-align: left;">169.254.77.108</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">connect with phone</td>
<td style="text-align: left;">192.168.42.42</td>
</tr>
</tbody>
</table>
</div>
<p>The spare SD card has the same IP address as the pi it is in!</p>
<p>You will be asked to type in a username and password:</p>
<p>Username: pi</p>
<p>Password: pftc</p>
<p>Resize the screen for convenience.</p>
<p>If the pi goes in terminal mode, then type xstart + enter to run the desktop.</p>
<p><em>Scan leaves</em></p>
<p>Make sure the envelopes are still kept wet. Check that the scanner is clean and free of debris. Clean if needed. Place wet leaf face-down on the scanner. Make sure the leaf is not folded and that leaflets do not overlap. The leaf should not go all the way to the edge of the scanner, because each picture will be cropped. You can cut the leaf into several pieces if needed, but please make a remark if you do so (e.g.&nbsp;cut 3). You can tape the leaf to the scanner using transparent tape if it folds (e.g.&nbsp;grasses).</p>
<p>For <strong>graminoids</strong> (grasses, sedges, rushes): Spread graminoid blades flat and tape to scanner if necessary to hold them in place. Exclude the leaf sheath (<a href="#fig-leaf">Figure&nbsp;<span>2.7</span></a>).</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-leaf" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/trait_wheel/leaf.jpeg" class="img-fluid figure-img" style="width:50.0%" alt="Illustrations of a leaf blade and sheet from a graminoid."></p>
<figcaption class="figure-caption">Figure&nbsp;2.7: Leaf blade and sheats for a graminoid</figcaption></figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Special cases for scanning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Carefully check the rules for how to scan special plant species plants.</p>
<ul>
<li>
<em>Festuca sp</em> have tightly rolled leaves and they should not be unfolded for the scanning.</li>
</ul>
</div>
</div>
<p><em>Scan, save and check the leaf</em></p>
<p>Click on the leaf icon (only needs to be done the first time). This will start the scanning program. If the scanner cannot be found, wait for a bit and try again. A window might pop up and you have to select the scanner. Choose the first option. Check the settings of the scanner. These should be set as standard, so please do not touch them if not needed.</p>
<p>The scanner settings should be:</p>
<ul>
<li>saved in Desktop/leaf_scans/</li>
<li>Type: JPEG</li>
<li>Colour</li>
<li>Full colour range</li>
<li>300dpi</li>
</ul>
<p>From here, do this for each leaf:</p>
<p>Press scan (at the bottom of the window) and wait a couple of seconds until the scanning process is done. A new window will pop up. Adjust the zoom to see the full picture (about 25%). Check the quality of the scan (has the whole leaf been scanned, is the leaf not upside down, dirt on the scan, etc.). If the scan is not ok, adjust the leaf and repeat the scan.</p>
<p>When the scan is ok, click on the green save button to save the scan. Make sure the cursor marks the filename (should be default). Scan the barcode on the envelope of the leaf that has been scanned with the barcode reader. The filename should be something like: AAA4667 (3 letters and 4 digits). When the scan is saved, the PI will check that the LeafID and that the scanning settings (dpi, etc.) are correct. If anything is wrong, it will open a window with an error message (<a href="#fig-error">Figure&nbsp;<span>2.8</span></a>). Please read it!</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-error" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/trait_wheel/error.png" class="img-fluid figure-img" alt="Screenshot of an error message on the PI." width="467"></p>
<figcaption class="figure-caption">Figure&nbsp;2.8: Error message on the PI.</figcaption></figure>
</div>
</div>
</div>
<p>Click anywhere in the window and it will disappear. Save the scan with the correct name or scan the leaf again if the settings are wrong. MAKE SURE TO DELETE THE SCAN WITH THE WRONG NAME OR SETTING. Tick the box on the envelope that the leaf has been scanned. Make sure the scanned leaves are kept wet and move them to the next station.</p>
<p>From time to time:</p>
<p>When you are finished with scanning click on the yoda icon. This will check the leafIDs. If anything is wrong it will open a window and indicate which scans are wrong. Make sure to fix all the wrong leafIDs and not to have duplicate scans before leaving the station.</p>
<p>Before leaving the station:</p>
<p>Copy all the scans onto a stick and deposit them on the PFTC6 hard drive. Shut down the pi. Wait 1 min to disconnect it from the power.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="images/trait_wheel/Thickness.png" class="img-fluid" style="width:18.0%"></p>
</div>
</div>
</section><section id="leaf-thickness" class="level2" data-number="2.5"><h2 data-number="2.5" class="anchored" data-anchor-id="leaf-thickness">
<span class="header-section-number">2.5</span> Leaf thickness</h2>
<p>Make sure the envelopes are still kept wet. Thickness varies over the surface of the leaf; generally, the leaf is thickest at the midrib, primary veins, margins, and leaf base. Avoid the midrib when measuring leaf thickness, unless the leaf is too small (<a href="#fig-vein">Figure&nbsp;<span>2.9</span></a>). Take three thickness measurements at several points on the lamina and note them on the envelope. From this, we will later calculate the average thickness. If the leaf is small, it may not be possible to take three unique measurements.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-vein" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/trait_wheel/veins.jpg" class="img-fluid figure-img" alt="A photo of a leaf showing valind an not valid points such as the midrib to measure leaf thickness." width="960"></p>
<figcaption class="figure-caption">Figure&nbsp;2.9: Showing where leaf thickness can be measured and where not, e.g.&nbsp;the midrib.</figcaption></figure>
</div>
</div>
</div>
<p><strong>Ferns</strong> Make sure you do not measure thickness on the spore-producing sori on the backside of ferns.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="images/trait_wheel/Data.png" class="img-fluid" style="width:15.0%"></p>
</div>
</div>
</section><section id="data-entry" class="level2" data-number="2.6"><h2 data-number="2.6" class="anchored" data-anchor-id="data-entry">
<span class="header-section-number">2.6</span> Data entry</h2>
<p>Ideally the envelope should still be kept wet until this point in case any information is missing. Go to this <a href="https://docs.google.com/spreadsheets/d/1utlnABtyry2wPjrPM01LOayVz8dRxOI1ViCETlQGCoA/edit?usp=sharing">google sheet</a>. Connect a barcode scanner to your computer. Scan the barcode of an envelope. Make sure that your cursor is in the right cell (ID). Enter all the data that is on the envelope (for details see <a href="#tbl-info">Table&nbsp;<span>2.1</span></a>). If any of the information is missing, check if it has been forgotten. Has the leaf been scanned, one thickness measurement is missing, etc. If anything is missing bring the leaf back to the according station in the trait wheel. When finished, check the box on the envelope that the data has been entered. Take a picture of the envelope. Bring the envelop to the drying station.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="images/trait_wheel/Dry.png" class="img-fluid" style="width:10.0%"></p>
</div>
</div>
</section><section id="dry-mass" class="level2" data-number="2.7"><h2 data-number="2.7" class="anchored" data-anchor-id="dry-mass">
<span class="header-section-number">2.7</span> Dry mass</h2>
<p>The leaves will be dried in the oven for 72 hours at 65°C.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="images/trait_wheel/Check.png" class="img-fluid" style="width:15.0%"></p>
</div>
</div>
</section><section id="data-checking" class="level2" data-number="2.8"><h2 data-number="2.8" class="anchored" data-anchor-id="data-checking">
<span class="header-section-number">2.8</span> Data checking</h2>
<p><em>Check scans</em> Find the folder with the leave scans on google drive: link Open each scan and check the follwing criterias:</p>
<ul>
<li>Is the whole leaf on the scan?</li>
<li>Has nothing else been scanned (cable, paper,…)?</li>
<li>Is there dirty the scan?</li>
<li>Has the leaf been cut? If yes, is it indicated on the envelope?</li>
<li>How many leaves are on the scan? If &gt; 1 is there a remark on the envelope?</li>
</ul>
<p><em>Check data</em> Open RStudio project and the R script (…). Download the trait data from google sheet. Check if the leafID is valid. Check if the variables have valid entries. E.g. correct day, site name, elevations, etc. Check if missing values can be found on the envelope or retrieved from the data. Plot the data to check if traits have unrealistic values. For more details see section data curation.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="images/trait_wheel/DataDoc.png" class="img-fluid" style="width:8.0%"></p>
</div>
</div>
</section><section id="data-documentation" class="level2" data-number="2.9"><h2 data-number="2.9" class="anchored" data-anchor-id="data-documentation">
<span class="header-section-number">2.9</span> Data documentation</h2>
<ul>
<li>description of the method of data collection</li>
<li>data dictionary for each data set</li>
</ul></section><section id="references" class="level2" data-number="2.10"><h2 data-number="2.10" class="anchored" data-anchor-id="references">
<span class="header-section-number">2.10</span> References</h2>


<div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-Perez-Harguindeguy2013-nv" class="csl-entry" role="listitem">
Pérez-Harguindeguy, N, S Dı́az, E Garnier, S Lavorel, H Poorter, P Jaureguiberry, M S Bret-Harte, et al. 2013. <span>“New Handbook for Standardised Measurement of Plant Functional Traits Worldwide.”</span> <em>Australian Journal of Botany</em>.
</div>
</div>
</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./1_courses.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">PFTC Course information</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./6_pftc_data.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Working with PFTC data</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>